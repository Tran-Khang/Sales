<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{% block title %}SalesPro Manager{% endblock %}</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />
        <link
            href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
            rel="stylesheet"
        />
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <link
            rel="stylesheet"
            href="{{ url_for('static', filename='css/styles.css') }}"
        />
    </head>
    <body class="bg-gray-50">
        <!-- Sidebar -->
        <div class="flex h-screen">
            <div
                class="hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0"
            >
                <div
                    class="flex flex-col flex-grow pt-5 bg-blue-800 overflow-y-auto"
                >
                    <div class="flex items-center flex-shrink-0 px-4">
                        <div class="text-white text-2xl font-bold">
                            <i class="fas fa-store mr-2"></i>SalesPro
                        </div>
                    </div>
                    <div class="mt-8 flex-1 flex flex-col">
                        <nav class="flex-1 px-2 pb-4 space-y-1">
                            <a
                                href="{{ url_for('main.dashboard') }}"
                                class="{% if request.endpoint == 'main.dashboard' %}bg-blue-900{% else %}hover:bg-blue-700{% endif %} text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md"
                            >
                                <i class="fas fa-tachometer-alt mr-3"></i>
                                Dashboard
                            </a>
                            <a
                                href="{{ url_for('main.products') }}"
                                class="{% if request.endpoint == 'main.products' %}bg-blue-900{% else %}hover:bg-blue-700{% endif %} text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md"
                            >
                                <i class="fas fa-boxes mr-3"></i>
                                Sản phẩm
                            </a>
                            <a
                                href="{{ url_for('main.sales') }}"
                                class="{% if request.endpoint == 'main.sales' %}bg-blue-900{% else %}hover:bg-blue-700{% endif %} text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md"
                            >
                                <i class="fas fa-shopping-cart mr-3"></i>
                                Bán hàng
                            </a>
                            <a
                                href="{{ url_for('main.customers') }}"
                                class="{% if request.endpoint == 'main.customers' %}bg-blue-900{% else %}hover:bg-blue-700{% endif %} text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md"
                            >
                                <i class="fas fa-users mr-3"></i>
                                Khách hàng
                            </a>
                            <a
                                href="{{ url_for('main.reports') }}"
                                class="{% if request.endpoint == 'main.reports' %}bg-blue-900{% else %}hover:bg-blue-700{% endif %} text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md"
                            >
                                <i class="fas fa-chart-bar mr-3"></i>
                                Báo cáo
                            </a>
                            <a
                                href="{{ url_for('main.inventory') }}"
                                class="{% if request.endpoint == 'main.inventory' %}bg-blue-900{% else %}hover:bg-blue-700{% endif %} text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md"
                            >
                                <i class="fas fa-warehouse mr-3"></i>
                                Tồn kho
                            </a>
                        </nav>
                    </div>
                    <div
                        class="flex-shrink-0 flex border-t border-blue-700 p-4"
                    >
                        <div class="flex items-center">
                            <div>
                                <div class="text-sm font-medium text-white">
                                    {{ current_user.username }}
                                </div>
                                <div class="text-xs text-blue-200">
                                    {{ current_user.role|title }}
                                </div>
                            </div>
                            <div class="ml-3">
                                <a
                                    href="{{ url_for('auth.logout') }}"
                                    class="text-white hover:text-blue-200"
                                >
                                    <i class="fas fa-sign-out-alt"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main content -->
            <div class="md:pl-64 flex flex-col flex-1">
                <!-- Header -->
                <div
                    class="sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white shadow"
                >
                    <div class="flex-1 px-4 flex justify-between">
                        <div class="flex-1 flex">
                            <div class="w-full flex md:ml-0">
                                <div
                                    class="relative w-full text-gray-400 focus-within:text-gray-600"
                                >
                                    {% block header %}{% endblock %}
                                </div>
                            </div>
                        </div>
                        <div class="ml-4 flex items-center md:ml-6">
                            <div class="relative" id="notification-icon">
                                <button
                                    class="p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none"
                                >
                                    <i class="fas fa-bell h-6 w-6"></i>
                                </button>
                                <span
                                    class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-400"
                                ></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main content area -->
                <main class="flex-1 overflow-y-auto focus:outline-none">
                    <div class="py-6">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8">
                            <!-- Flash messages -->
                            {% with messages =
                            get_flashed_messages(with_categories=true) %} {% if
                            messages %} {% for category, message in messages %}
                            <div
                                class="mb-4 p-4 rounded-md {% if category == 'success' %}bg-green-50 text-green-800 border border-green-200{% elif category == 'error' or category == 'danger' %}bg-red-50 text-red-800 border border-red-200{% else %}bg-blue-50 text-blue-800 border border-blue-200{% endif %}"
                            >
                                {{ message }}
                            </div>
                            {% endfor %} {% endif %} {% endwith %} {% block
                            content %}{% endblock %}
                        </div>
                    </div>
                </main>

                <!-- Footer -->
                <footer class="bg-white shadow mt-auto">
                    <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 md:px-8">
                        <div
                            class="flex flex-col md:flex-row justify-between items-center"
                        >
                            <div class="text-gray-600 text-sm">
                                <p>
                                    &copy; 2024 SalesPro Manager. Hệ thống quản
                                    lý bán hàng chuyên nghiệp.
                                </p>
                            </div>
                            <div class="mt-4 md:mt-0">
                                <div class="flex space-x-6">
                                    <a
                                        href="#"
                                        class="text-gray-400 hover:text-gray-500"
                                    >
                                        <i class="fab fa-github"></i>
                                    </a>
                                    <a
                                        href="#"
                                        class="text-gray-400 hover:text-gray-500"
                                    >
                                        <i class="fas fa-question-circle"></i>
                                    </a>
                                    <a
                                        href="#"
                                        class="text-gray-400 hover:text-gray-500"
                                    >
                                        <i class="fas fa-cog"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>

        <!-- Mobile menu button -->
        <div class="md:hidden fixed bottom-4 right-4 z-50">
            <button
                id="mobile-menu-button"
                class="bg-blue-800 text-white p-3 rounded-full shadow-lg"
            >
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <!-- Mobile menu -->
        <div
            id="mobile-menu"
            class="fixed inset-0 bg-gray-800 bg-opacity-75 z-40 hidden"
        >
            <div
                class="fixed inset-y-0 left-0 max-w-xs w-full bg-blue-800 shadow-xl"
            >
                <div
                    class="flex items-center justify-between p-4 border-b border-blue-700"
                >
                    <div class="text-white text-xl font-bold">
                        <i class="fas fa-store mr-2"></i>SalesPro
                    </div>
                    <button id="close-mobile-menu" class="text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <nav class="mt-5 px-2 space-y-1">
                    <a
                        href="{{ url_for('main.dashboard') }}"
                        class="text-white hover:bg-blue-700 block px-3 py-2 rounded-md"
                        >Dashboard</a
                    >
                    <a
                        href="{{ url_for('main.products') }}"
                        class="text-white hover:bg-blue-700 block px-3 py-2 rounded-md"
                        >Sản phẩm</a
                    >
                    <a
                        href="{{ url_for('main.sales') }}"
                        class="text-white hover:bg-blue-700 block px-3 py-2 rounded-md"
                        >Bán hàng</a
                    >
                    <a
                        href="{{ url_for('main.customers') }}"
                        class="text-white hover:bg-blue-700 block px-3 py-2 rounded-md"
                        >Khách hàng</a
                    >
                    <a
                        href="{{ url_for('main.reports') }}"
                        class="text-white hover:bg-blue-700 block px-3 py-2 rounded-md"
                        >Báo cáo</a
                    >
                    <a
                        href="{{ url_for('main.inventory') }}"
                        class="text-white hover:bg-blue-700 block px-3 py-2 rounded-md"
                        >Tồn kho</a
                    >
                    <a
                        href="{{ url_for('auth.logout') }}"
                        class="text-white hover:bg-blue-700 block px-3 py-2 rounded-md"
                        >Đăng xuất</a
                    >
                </nav>
            </div>
        </div>

        <script src="{{ url_for('static', filename='js/main.js') }}"></script>
        <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
        <script src="{{ url_for('static', filename='js/realtime.js') }}"></script>
        {% block scripts %}{% endblock %}
    </body>
</html>
